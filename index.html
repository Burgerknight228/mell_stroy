<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MELLSTROY.GAME</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{
  background:linear-gradient(135deg,#1a2a6c,#190127,#1f1632);
  min-height:100vh;display:flex;justify-content:center;align-items:center;
}
.container{
  width:800px;background:rgba(0,0,0,0.85);color:#fff;
  border-radius:20px;padding:20px;box-shadow:0 0 30px rgba(0,0,0,0.5);
}
h1{text-align:center;color:#d0d0d0;margin-bottom:10px;text-shadow:0 0 10px #d0d0d0;}
.balance-container{
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(0,0,0,0.4);padding:10px 20px;border-radius:10px;margin-bottom:15px;
}
.balance{font-size:1.4rem;font-weight:bold;color:#ffcc00;}
.slot-machine{background:#1a1a2e;border-radius:15px;padding:20px;box-shadow:inset 0 0 15px rgba(0,0,0,0.5);}
.reels-container{display:flex;justify-content:space-between;}
.reel{
  width:18%;height:400px;overflow:hidden;background:#000;
  border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.5);position:relative;
}
.reel::before{
  content:'';position:absolute;top:100px;left:0;width:100%;height:100px;
  border-top:2px solid rgba(255,204,0,0.7);border-bottom:2px solid rgba(255,204,0,0.7);
  pointer-events:none;
}
.reel-strip{position:absolute;width:100%;top:0;left:0;}
.symbol{width:100%;height:100px;display:flex;align-items:center;justify-content:center;}
.symbol-img{width:80%;height:80%;object-fit:contain;}
.controls{text-align:center;margin-top:15px;}
.spin-btn{
  padding:15px 40px;border:none;border-radius:50px;
  background:linear-gradient(145deg,#ffcc00,#ffaa00);
  color:#000;font-weight:bold;font-size:1.2rem;
  cursor:pointer;transition:transform 0.2s;
}
.spin-btn:hover{transform:scale(1.05);}
.spin-btn:disabled{background:#555;color:#999;cursor:not-allowed;}
.result{text-align:center;margin-top:15px;font-size:1.4rem;color:#ffcc00;}
.win{animation:pulse 0.5s infinite alternate;}
@keyframes pulse{from{transform:scale(1);}to{transform:scale(1.1);}}
.glow{
  background:rgba(255,215,0,0.3);
  border-radius:8px;
  transition:background 0.3s;
}
</style>
</head>
<body>
<div class="container">
  <h1>MELLSTROY.GAME</h1>
  <div class="balance-container">
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span> $</div>
    <div class="balance">–°—Ç–∞–≤–∫–∞: <span id="bet">50</span> $</div>
  </div>

  <div class="slot-machine">
    <div class="reels-container">
      <div class="reel"><div class="reel-strip" id="strip1"></div></div>
      <div class="reel"><div class="reel-strip" id="strip2"></div></div>
      <div class="reel"><div class="reel-strip" id="strip3"></div></div>
      <div class="reel"><div class="reel-strip" id="strip4"></div></div>
      <div class="reel"><div class="reel-strip" id="strip5"></div></div>
    </div>
    <div class="controls">
      <button id="spin-btn" class="spin-btn">‚ü≥</button>
    </div>
    <div id="result" class="result"></div>
  </div>
</div>

<script>
let balance = 1000;
let bet = 50;
let isSpinning = false;
let spinCount = 0;
const balanceEl = document.getElementById('balance');
const resultEl = document.getElementById('result');

const symbols = [
    {id:1, html:'<img src="sugar bear.png" class="symbol-img">'},
    {id:2, html:'<img src="zues cerber.png" class="symbol-img">'},
    {id:3, html:'<img src="" class="symbol-img">'},
    {id:4, html:'<img src="785e6fe1470966786e0ecff568833a2b.jpg" class="symbol-img">'},
    {id:5, html:'<img src="1023.gif" class="symbol-img">'},
    {id:6, html:'<img src="1022.gif" class="symbol-img">'}
];

// —Å–æ–∑–¥–∞—ë–º –±–∞—Ä–∞–±–∞–Ω—ã —Å —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
function createReels() {
  for (let i=1;i<=5;i++){
    const strip=document.getElementById(`strip${i}`);
    strip.innerHTML='';
    for (let j=0;j<30;j++){
      const sym = symbols[Math.floor(Math.random()*symbols.length)];
      const el=document.createElement('div');
      el.className='symbol';
      el.innerHTML=sym.html;
      strip.appendChild(el);
    }
  }
}

// —Å–æ–∑–¥–∞—ë–º –±–∞—Ä–∞–±–∞–Ω—ã —Å –¥–∂–µ–∫–ø–æ—Ç–æ–º (–≤—Å–µ —Å–∏–º–≤–æ–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ)
function createJackpotReels() {
  const jackpotSymbol = symbols[5]; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏–º–≤–æ–ª —Å id:6 –¥–ª—è –¥–∂–µ–∫–ø–æ—Ç–∞
  for (let i=1;i<=5;i++){
    const strip=document.getElementById(`strip${i}`);
    strip.innerHTML='';
    for (let j=0;j<30;j++){
      const el=document.createElement('div');
      el.className='symbol';
      el.innerHTML=jackpotSymbol.html;
      strip.appendChild(el);
    }
  }
}

document.addEventListener('DOMContentLoaded',()=>{
  // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ–∑–¥–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
  createReels();
  document.getElementById('spin-btn').addEventListener('click',startSpin);
});

function startSpin(){
  if(isSpinning) return;
  if(balance < bet){
    resultEl.textContent="–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!";
    return;
  }
  isSpinning=true;
  spinCount++;
  resultEl.textContent="";
  balance -= bet;
  balanceEl.textContent=balance;

  const isJackpot = spinCount % 5 === 0;
  
  if (isJackpot) {
    createJackpotReels(); // –°–æ–∑–¥–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –¥–ª—è –¥–∂–µ–∫–ø–æ—Ç–∞
  } else {
    createReels(); // –°–æ–∑–¥–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
  }

  const reels=[
    document.getElementById('strip1'),
    document.getElementById('strip2'),
    document.getElementById('strip3'),
    document.getElementById('strip4'),
    document.getElementById('strip5')
  ];

  reels.forEach((r,i)=>{
    spinReel(r, 700 + i*100, i*80, i===reels.length-1, isJackpot);
  });
}

function spinReel(reel, duration, delay, isLast=false, isJackpot=false){
  const symbolHeight=100;
  setTimeout(()=>{
    let position=0;
    let start=performance.now();
    let lastFrame=start;
    function animate(time){
      let elapsed=time-start;
      let delta=time-lastFrame;
      lastFrame=time;
      const progress=Math.min(elapsed/duration,1);
      const speedFactor=(1-Math.pow(progress,2));
      position += delta*2.5*speedFactor;
      if(position>=symbolHeight){
        position-=symbolHeight;
        reel.appendChild(reel.firstElementChild);
      }
      reel.style.transform=`translateY(${position}px)`;
      if(progress<1){
        requestAnimationFrame(animate);
      }else{
        reel.style.transform='translateY(0)';
        if(isLast) finishSpin(isJackpot);
      }
    }
    requestAnimationFrame(animate);
  },delay);
}

function finishSpin(isJackpot){
  document.querySelectorAll('.symbol.glow').forEach(el=>el.classList.remove('glow'));
  let win=0;
  if(isJackpot){
    win=bet*20;
    balance+=win;
    resultEl.textContent=`üî• –î–∂–µ–∫–ø–æ—Ç! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} ‚ÇΩ!`;
    highlightAll(); // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –ø—Ä–∏ –¥–∂–µ–∫–ø–æ—Ç–µ
  } else {
    // —Å–ª—É—á–∞–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—ã—á–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à (—Ä–µ–¥–∫–æ)
    const isSmallWin = Math.random() < 0.15;
    if(isSmallWin){
      win=bet*5;
      balance+=win;
      resultEl.textContent=`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} ‚ÇΩ!`;
      highlightCenter();
    } else {
      resultEl.textContent="–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!";
    }
  }
  resultEl.classList.add('win');
  balanceEl.textContent=balance;
  isSpinning=false;
}

function highlightCenter(){
  for(let i=1;i<=5;i++){
    const strip=document.getElementById(`strip${i}`);
    const symbolsEls=strip.getElementsByClassName('symbol');
    symbolsEls[1].classList.add('glow');
  }
}

function highlightAll(){
  for(let i=1;i<=5;i++){
    const strip=document.getElementById(`strip${i}`);
    const symbolsEls=strip.getElementsByClassName('symbol');
    // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –≤ –±–∞—Ä–∞–±–∞–Ω–µ –ø—Ä–∏ –¥–∂–µ–∫–ø–æ—Ç–µ
    for(let j=0; j<symbolsEls.length; j++){
      symbolsEls[j].classList.add('glow');
    }
  }
}
</script>
</body>
</html>